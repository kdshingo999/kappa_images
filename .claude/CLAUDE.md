<claude-mem-context>
# Recent Activity

<!-- This section is auto-generated by claude-mem. Edit content outside the tags. -->

### Jan 15, 2026

| ID | Time | T | Title | Read |
|----|------|---|-------|------|
| #1530 | 3:46 AM | 🟣 | Prompt Management System with Base and Pattern Files | ~361 |
| #1529 | 3:45 AM | ✅ | Process Tracker Updated for Prompt Management Feature | ~270 |
| #1523 | 3:42 AM | ✅ | Process Tracker Updated with Current Work Status | ~312 |
| #1513 | 3:25 AM | ✅ | Comprehensive Project Guide for Claude Workspace | ~403 |
| #1499 | 3:23 AM | ✅ | Claude Workspace Configuration File | ~386 |
</claude-mem-context>

---

# CLAUDE.md — Project Guide for Claude

## 0. このプロジェクトは何？
- **目的**: OpenAI GPT Image 1.5を使って、かっぱ（河童）のキャラクター画像を生成するPythonスクリプト
- **ユーザー**: 画像生成を行いたい開発者・クリエイター
- **成功条件**: コマンド一つでかっぱのキャラクター画像を生成でき、PNGファイルとして保存できること

## 1. 技術スタック
- **Runtime / Platform**: Python 3.8+
- **Language**: Python
- **Framework**: なし（シンプルなスクリプト）
- **Package manager**: pip
- **主要ライブラリ**:
  - openai (>= 1.0.0) - OpenAI API クライアント
  - python-dotenv (>= 1.0.0) - 環境変数管理
- **API**: OpenAI GPT Image 1.5 (gpt-image-1.5)
- **DB / Storage**: なし（ローカルファイルシステムに画像保存）
- **Infra / Deploy**: ローカル実行
- **Test**: なし（今後追加予定）

## 2. ディレクトリ構造（重要な入口）
- `generate_kappa.py` - メイン画像生成スクリプト
- `requirements.txt` - Python依存パッケージリスト
- `README.md` - 使い方とプロジェクト説明
- `.gitignore` - Git管理除外設定
- `generated_images/` - 生成された画像の保存先（自動作成）
- `.claude/` - Claude Code設定ディレクトリ
  - `claude.yaml` - プロジェクト設定
  - `process.md` - 作業進捗管理
  - `CLAUDE.md` - このファイル

---

## 3. 適用スキル

> このプロジェクトで適用するスキルを選択してください。
> スキルファイルは `~/.claude/skills/` または dotfiles リポジトリから参照。

### Base（必須）
- [x] `base/workflow.md` — 作業の進め方、process.md運用

### Language
- [x] `language/python.md` - Python開発全般

### Framework
- なし（シンプルなスクリプトプロジェクト）

### Domain
- なし

---

## 4. 適用エージェント

> このプロジェクトで使用するサブエージェントを選択してください。
> エージェントファイルは `~/.claude/agents/` に配置。

### Planning（企画・設計）
- [ ] `planning/business-analyst.md` — 要件定義・仕様策定
- [ ] `planning/tech-evaluator.md` — 技術選定・サービス評価

### Development（開発）
- [ ] `backend/backend-developer.md` — バックエンド汎用（Python API開発時に使用）

### Quality（品質保証）
- [ ] `quality/qa-expert.md` — QA全般
- [ ] `quality/e2e-tester.md` — E2Eテスト

### Workflow（ワークフロー・タスク管理）
- [ ] `workflow/task-decomposer.md` — タスク分解・1コミット単位化
- [ ] `workflow/quality-fixer.md` — 品質チェック・自動修正

### Common（汎用）
- [x] `common/code-reviewer.md` — コードレビュー
- [ ] `common/test-writer.md` — テスト作成
- [ ] `common/security-auditor.md` — セキュリティ監査
- [ ] `common/documentation-expert.md` — 技術文書・API ドキュメント
- [ ] `common/refactoring-expert.md` — リファクタリング・負債解消

---

## 5. 触ってはいけないもの（地雷）
- `.claude/settings.local.json` - パーミッション設定（OpenAI APIキー関連）
- `OPENAI_API_KEY` 環境変数 - 既に設定済み、変更しない

## 6. 重要リンク
- `.claude/process.md` - 作業進捗管理
- `README.md` - プロジェクト説明・使い方

---

## 7. プロジェクト固有のルール

> スキル・エージェントでカバーされない、このプロジェクト特有のルールを記載

### コーディング
- Python標準のPEP 8スタイルガイドに従う
- 関数にはdocstringを記載（Args, Returnsを明記）
- エラーハンドリングを適切に行う

### 命名規則
- ファイル名：snake_case（例：generate_kappa.py）
- 関数名：snake_case（例：generate_kappa_image）
- 定数：UPPER_SNAKE_CASE（例：DEFAULT_SIZE）

### OpenAI API使用
- モデル名：`gpt-image-1.5`（最新モデル）
- レスポンス形式：base64エンコード（`b64_json`）
- 画像は必ずPNGファイルとして保存
- 生成情報（プロンプト、サイズ、画質）をテキストファイルに記録

### その他
- 生成された画像は`generated_images/`ディレクトリに保存
- タイムスタンプ付きのファイル名を使用（衝突回避）

---

## 8. セットアップ手順

### 依存パッケージのインストール
```bash
pip install -r requirements.txt
```

### OpenAI APIキーの設定
```bash
# 既に設定済み
echo $OPENAI_API_KEY
```

### スキルの配置（完了済み）
```bash
# シンボリックリンクで配置済み
ls -la .claude/skills
```

### エージェントの配置（完了済み）
```bash
# シンボリックリンクで配置済み
ls -la .claude/agents
```

### 画像生成の実行
```bash
python generate_kappa.py
```

---

## 9. 今後の拡張案
- [ ] コマンドライン引数でプロンプトをカスタマイズ
- [ ] 複数画像の一括生成機能
- [ ] 画像編集機能（GPT Image 1.5の編集機能を活用）
- [ ] ユニットテストの追加
- [ ] CI/CDパイプラインの構築
- [ ] Webインターフェースの追加